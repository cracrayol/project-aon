#!/usr/bin/perl

while( <> ) {
    if( /"[^">]*&([^;]+);/ && $1 !~ /^link/ ) {
        warn "Entity $1 in attribute";
    }
    s{\&(apos|nbsp|iexcl|cent|pound|curren|yen|brvbar|sect|uml|copy|ordf|laquo|not|shy|reg|macr|deg|plusmn|sup2|sup3|acute|micro|para|middot|cedil|sup1|ordm|raquo|frac14|frac12|frac34|iquest|Agrave|Aacute|Acirc|Atilde|Auml|Aring|AElig|Ccedil|Egrave|Eacute|Ecirc|Euml|Igrave|Iacute|Icirc|Iuml|ETH|Ntilde|Ograve|Oacute|Ocirc|Otilde|Ouml|times|Oslash|Ugrave|Uacute|Ucirc|Uuml|Yacute|THORN|szlig|agrave|aacute|acirc|atilde|auml|aring|aelig|ccedil|egrave|eacute|ecirc|euml|igrave|iacute|icirc|iuml|eth|ntilde|ograve|oacute|ocirc|otilde|ouml|divide|oslash|ugrave|uacute|ucirc|uuml|yacute|thorn|yuml|ampersand|lsquot|rsquot|ldquot|rdquot|minus|endash|emdash|ellips|lellips|blankline|percent|thinspace|frac116|plus);}{<ch.$1/>}g;

    s{\240}{<ch.nbsp/>}g;
    s{\241}{<ch.iexcl/>}g;
    s{\242}{<ch.cent/>}g;
    s{\243}{<ch.pound/>}g;
    s{\244}{<ch.curren/>}g;
    s{\245}{<ch.yen/>}g;
    s{\246}{<ch.brvbar/>}g;
    s{\247}{<ch.sect/>}g;
    s{\250}{<ch.uml/>}g;
    s{\251}{<ch.copy/>}g;
    s{\252}{<ch.ordf/>}g;
    s{\253}{<ch.laquo/>}g;
    s{\254}{<ch.not/>}g;
    s{\255}{<ch.shy/>}g;
    s{\256}{<ch.reg/>}g;
    s{\257}{<ch.macr/>}g;
    s{\260}{<ch.deg/>}g;
    s{\261}{<ch.plusmn/>}g;
    s{\262}{<ch.sup2/>}g;
    s{\263}{<ch.sup3/>}g;
    s{\264}{<ch.acute/>}g;
    s{\265}{<ch.micro/>}g;
    s{\266}{<ch.para/>}g;
    s{\267}{<ch.middot/>}g;
    s{\270}{<ch.cedil/>}g;
    s{\271}{<ch.sup1/>}g;
    s{\272}{<ch.ordm/>}g;
    s{\273}{<ch.raquo/>}g;
    s{\274}{<ch.frac14/>}g;
    s{\275}{<ch.frac12/>}g;
    s{\276}{<ch.frac34/>}g;
    s{\277}{<ch.iquest/>}g;
    s{\300}{<ch.Agrave/>}g;
    s{\301}{<ch.Aacute/>}g;
    s{\302}{<ch.Acirc/>}g;
    s{\303}{<ch.Atilde/>}g;
    s{\304}{<ch.Auml/>}g;
    s{\305}{<ch.Aring/>}g;
    s{\306}{<ch.AElig/>}g;
    s{\307}{<ch.Ccedil/>}g;
    s{\310}{<ch.Egrave/>}g;
    s{\311}{<ch.Eacute/>}g;
    s{\312}{<ch.Ecirc/>}g;
    s{\313}{<ch.Euml/>}g;
    s{\314}{<ch.Igrave/>}g;
    s{\315}{<ch.Iacute/>}g;
    s{\316}{<ch.Icirc/>}g;
    s{\317}{<ch.Iuml/>}g;
    s{\320}{<ch.ETH/>}g;
    s{\321}{<ch.Ntilde/>}g;
    s{\322}{<ch.Ograve/>}g;
    s{\323}{<ch.Oacute/>}g;
    s{\324}{<ch.Ocirc/>}g;
    s{\325}{<ch.Otilde/>}g;
    s{\326}{<ch.Ouml/>}g;
    s{\327}{<ch.times/>}g;
    s{\330}{<ch.Oslash/>}g;
    s{\331}{<ch.Ugrave/>}g;
    s{\332}{<ch.Uacute/>}g;
    s{\333}{<ch.Ucirc/>}g;
    s{\334}{<ch.Uuml/>}g;
    s{\335}{<ch.Yacute/>}g;
    s{\336}{<ch.THORN/>}g;
    s{\337}{<ch.szlig/>}g;
    s{\340}{<ch.agrave/>}g;
    s{\341}{<ch.aacute/>}g;
    s{\342}{<ch.acirc/>}g;
    s{\343}{<ch.atilde/>}g;
    s{\344}{<ch.auml/>}g;
    s{\345}{<ch.aring/>}g;
    s{\346}{<ch.aelig/>}g;
    s{\347}{<ch.ccedil/>}g;
    s{\350}{<ch.egrave/>}g;
    s{\351}{<ch.eacute/>}g;
    s{\352}{<ch.ecirc/>}g;
    s{\353}{<ch.euml/>}g;
    s{\354}{<ch.igrave/>}g;
    s{\355}{<ch.iacute/>}g;
    s{\356}{<ch.icirc/>}g;
    s{\357}{<ch.iuml/>}g;
    s{\360}{<ch.eth/>}g;
    s{\361}{<ch.ntilde/>}g;
    s{\362}{<ch.ograve/>}g;
    s{\363}{<ch.oacute/>}g;
    s{\364}{<ch.ocirc/>}g;
    s{\365}{<ch.otilde/>}g;
    s{\366}{<ch.ouml/>}g;
    s{\367}{<ch.divide/>}g;
    s{\370}{<ch.oslash/>}g;
    s{\371}{<ch.ugrave/>}g;
    s{\372}{<ch.uacute/>}g;
    s{\373}{<ch.ucirc/>}g;
    s{\374}{<ch.uuml/>}g;
    s{\375}{<ch.yacute/>}g;
    s{\376}{<ch.thorn/>}g;
    s{\377}{<ch.yuml/>}g;

    print;
}
